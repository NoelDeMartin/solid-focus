(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-795096ba"],{2956:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("DialogBase",{attrs:{dialog:e.dialog,title:e.title,fullscreen:e.$ui.mobile},scopedSlots:e._u([{key:"actions",fn:function(){return[e._t("secondary-actions"),e.$ui.mobile?e._e():[n("v-spacer"),n("v-btn",{attrs:{flat:""},on:{click:e.close}},[e._v("Close")]),n("v-btn",{attrs:{color:"primary",type:"submit"},on:{click:e.submit}},[e._v("\n                "+e._s(e.submitLabel)+"\n            ")])]]},proxy:!0},{key:"toolbar-actions",fn:function(){return[e.$ui.mobile?n("v-btn",{attrs:{dark:"",flat:"",small:""},on:{click:e.submit}},[e._v("\n            "+e._s(e.submitLabel)+"\n        ")]):e._e()]},proxy:!0}],null,!0)},[n("v-form",{ref:"form",staticClass:"p-4",attrs:{"lazy-validation":""},on:{submit:function(t){return t.preventDefault(),e.submit(t)}}},[e._t("default",null,{submit:e.submit})],2)],1)},r=[],i=n("2b0e"),s=n("53d6"),o=i["default"].extend({components:{DialogBase:s["a"]},props:{title:{type:String,default:null},dialog:{type:Object,required:!0},cancelLabel:{type:String,default:"Cancel"},submitLabel:{type:String,default:"Submit"}},methods:{close:function(){this.$ui.closeDialog(this.dialog.id)},submit:function(){this.$refs.form.validate()&&this.$emit("completed")}}}),u=o,c=n("2877"),l=Object(c["a"])(u,a,r,!1,null,null,null);t["a"]=l.exports},"73f9":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("DialogForm",{attrs:{dialog:e.dialog,title:e.title,"submit-label":e.submitLabel},on:{completed:e.submit},scopedSlots:e._u([e.workspace?{key:"secondary-actions",fn:function(){return[e.$ui.mobile?n("v-btn",{attrs:{flat:""},on:{click:e.remove}},[n("v-icon",{staticClass:"mr-1"},[e._v("delete")]),e._v("\n            Delete\n        ")],1):n("v-btn",{attrs:{title:"Delete workspace",flat:"",icon:""},on:{click:e.remove}},[n("v-icon",[e._v("delete")])],1)]},proxy:!0}:null],null,!0)},[!e.workspace&&e.storages.length>1?n("v-select",{attrs:{items:e.storages,rules:e.rules.storage,label:"Storage"},model:{value:e.storage,callback:function(t){e.storage=t},expression:"storage"}}):e._e(),n("v-text-field",{ref:"name",attrs:{rules:e.rules.name,label:"Name","validate-on-blur":"",autofocus:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1)},r=[],i=n("a34a"),s=n.n(i),o=n("2b0e"),u=n("5953"),c=n("2956"),l=n("594b"),f=n("80fb");function p(e,t,n,a,r,i,s){try{var o=e[i](s),u=o.value}catch(c){return void n(c)}o.done?t(u):Promise.resolve(u).then(a,r)}function m(e){return function(){var t=this,n=arguments;return new Promise(function(a,r){var i=e.apply(t,n);function s(e){p(i,a,r,s,o,"next",e)}function o(e){p(i,a,r,s,o,"throw",e)}s(void 0)})}}var d=o["default"].extend({components:{DialogForm:c["a"]},props:{dialog:{type:Object,required:!0},workspace:{type:Object,default:null}},data:function(){return{storage:this.$auth.user.storages[0],name:this.workspace?this.workspace.name:""}},computed:{title:function(){return this.workspace?'Edit "'.concat(this.workspace.name,'" workspace'):"Create Workspace"},submitLabel:function(){return this.workspace?"Update":"Create"},rules:function(){return{storage:[f["a"].required],name:[f["a"].required,f["a"].maxLength(255)]}},storages:function(){return this.$auth.user.storages}},mounted:function(){this.$nextTick(this.$refs.name.focus)},methods:{submit:function(){var e=m(s.a.mark(function e(){var t;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t={name:this.name},this.workspace?this.updateWorkspace(t,{name:this.workspace.name}):this.createWorkspace(t),this.$ui.completeDialog(this.dialog.id);case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),updateWorkspace:function(){var e=m(s.a.mark(function e(t,n){var a,r;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=new l["a"],e.prev=1,a.start(),e.next=5,this.workspace.update(t);case 5:a.complete(),e.next=12;break;case 8:for(r in e.prev=8,e.t0=e["catch"](1),a.fail(e.t0),n)this.workspace.setAttribute(r,n[r]);case 12:case"end":return e.stop()}},e,this,[[1,8]])}));function t(t,n){return e.apply(this,arguments)}return t}(),createWorkspace:function(){var e=m(s.a.mark(function e(t){var n,a;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=new u["default"](t),a=new l["a"],e.prev=2,a.start(),this.$workspaces.add(n),n.setRelationModels("lists",[]),e.next=8,n.save(this.storage);case 8:a.complete(),e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](2),a.fail(e.t0),this.$workspaces.remove(n);case 15:case"end":return e.stop()}},e,this,[[2,11]])}));function t(t){return e.apply(this,arguments)}return t}(),remove:function(){this.$ui.completeDialog(this.dialog.id),this.$ui.openDialog(function(){return n.e("chunk-2d0df226").then(n.bind(null,"892a"))},{workspace:this.workspace})}}}),h=d,b=n("2877"),v=Object(b["a"])(h,a,r,!1,null,null,null);t["default"]=v.exports},"80fb":function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}var s=function(){function e(){a(this,e)}return i(e,[{key:"minLength",value:function(e){return function(t){return t&&t.length>=e||"This field must be more than ".concat(e," characters long")}}},{key:"maxLength",value:function(e){return function(t){return t&&t.length<=e||"This field must be less than ".concat(e," characters long")}}},{key:"required",get:function(){return function(e){return!!e||"This field is required"}}}]),e}();t["a"]=new s}}]);
//# sourceMappingURL=chunk-795096ba.505a5bdc.js.map